# .tmux.conf

#############################################################################
# options
#set -g default-terminal "screen-256color"

set-option -g set-titles on
set-option -g history-limit 100000
set-option -g display-panes-time 150
set-option -g clock-mode-style 24
set-option -g mode-keys vi

set-window-option -g window-status-style default
set-window-option -g automatic-rename on
set-window-option -g aggressive-resize on
set-window-option -g monitor-activity on

# https://stackoverflow.com/questions/8469612/how-do-i-make-tmux-reorder-windows-when-one-is-deleted
set-option -g renumber-windows on

# https://unix.stackexchange.com/questions/35924/how-to-make-tmux-count-windows-starting-from-1-instead-of-0
# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# https://github.com/neovim/neovim/wiki/FAQ
set-option -sg escape-time 0  # 10
# vim `focus-events` is not enabled. 'autoread' may not work
set-option -g focus-events on

#####################################################################################
# bind

# C-r reloads config
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Rebind Ctrl-a as the prefix
unbind C-b
set-option -g prefix C-a
bind-key C-a last-window

# https://superuser.com/questions/702189/tmux-scroll-up-down-with-shift-page-up-down-into-a-pane
bind -n S-Pageup if-shell "ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'" "send-keys Pageup" "copy-mode -u"
bind -n S-Pagedown send-keys Pagedown

# https://superuser.com/questions/343572/how-do-i-reorder-tmux-windows
bind-key -n C-S-Left  swap-window -t -1 \; select-window -t -1
bind-key -n C-S-Right swap-window -t +1 \; select-window -t +1

# https://unix.stackexchange.com/questions/12032/how-to-create-a-new-window-on-the-current-directory-in-tmux
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
