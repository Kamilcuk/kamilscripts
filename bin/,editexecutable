#!/bin/bash

if (($# == 1)) && [[ "$1" == "--bash-completion" ]]; then
	complete -c "$BASH_SOURCE" "$(basename -- "$BASH_SOURCE")"
	return
fi

fatal() {
	echo "$name: ERROR:" "$*" >&2
	exit 1
}

name=$(basename -- "$0")
usage() {
		cat <<EOF
Usage: $name executablefile

Edit executable file.
EOF
}

if (($# == 0)); then
	usage
	exit 1
fi
if (($# != 1)); then
	fatal "Too many arguments"
fi
if ! l=$(command -v "$1") || ! [[ -x "$l" ]]; then
	fatal "No executable found: $1"
fi

set -x
${EDITOR:-vim} "$l"
